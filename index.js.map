{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com';\n\nexport const fetchPhotos = (searchedQuery, page, perPage) => {\nconst asyncParams = {\n    params: {\n    key: '45468562-3d934deccae668c7d7f46b2f1',\n    q: searchedQuery,\n    page: page,\n    per_page: perPage,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    },\n};\nreturn axios.get('/api/', asyncParams).then(response => response.data);\n};","\nexport function createGalleryCard (imgData) {\n    return `\n    <li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=\"${imgData.largeImageURL}\">\n        <img src=\"${imgData.webformatURL}\" alt=\"${imgData.tags}\" class=\"gallery-img\" />\n        </a>\n        <ul class=\"img-list\">\n        <li class=\"img-item\">\n            <h3 class=\"img-title\">Likes</h3>\n            <p class=\"img-text\">${imgData.likes}</p>\n        </li>\n        <li class=\"img-item\">\n            <h3 class=\"img-title\">Views</h3>\n            <p class=\"img-text\">${imgData.views}</p>\n        </li>\n        <li class=\"img-item\">\n            <h3 class=\"img-title\">Comments</h3>\n            <p class=\"img-text\">${imgData.comments}</p>\n        </li>\n        <li class=\"img-item\">\n            <h3 class=\"img-title\">Downloads</h3>\n            <p class=\"img-text\">${imgData.downloads}</p>\n        </li>\n        </ul>\n    </li>\n    `\n}","import { fetchPhotos } from \"./js/pixabay-api\";\nimport { createGalleryCard } from \"./js/render-functions\";\nimport iziToast from \"izitoast\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst searchForm = document.querySelector(\".search-form\");\nconst cardsList = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nconst loadMoreBtn = document.querySelector(\".load-more-btn\");\n\nlet page = 1;\nconst perPage = 15;\nlet query = '';\n\nconst gallery = new SimpleLightbox(\".gallery li a\", {\n    captions: true,\n    captionClass: \"style-caption\",\n    captionsData: 'alt',\n    captionDelay: 250,\n    disableRightClick: true,\n});\n\nloadMoreBtn.classList.add('is-hidden');\n\nconst showElement = (element) => element.classList.remove('is-hidden');\nconst hideElement = (element) => element.classList.add('is-hidden');\n\nconst showError = (message, title = \"Error\") => {\n    iziToast.error({\n        message,\n        position: \"topCenter\",\n        title,\n        timeout: 4000,\n    });\n};\n\nconst clearPage = () => {\n    cardsList.innerHTML = '';\n    hideElement(loadMoreBtn);\n};\n\nconst onSearchFormSubmit = async (event) => {\n    event.preventDefault();\n    loader.classList.add(\"is-open\");\n    page = 1;\n    query = searchForm.elements.user_query.value.trim();\n    clearPage();\n\n    if (!query) return;\n\n    try {\n        showElement(loader);\n        const data = await fetchPhotos(query, page, perPage);\n        \n        if (data.hits.length === 0) {\n            showError(\"Sorry, there are no images matching your search query. Please try again!\", \"Attention\");\n            loader.classList.remove(\"is-open\");\n            return;\n        }\n\n        renderGallery(data.hits);\n        loader.classList.remove(\"is-open\");\n\n        if (data.hits.length < perPage) {\n            iziToast.info({\n                message: \"You've reached the end of search results.\",\n                position: \"topCenter\",\n                title: \"Info\",\n                timeout: 4000,\n            });\n        } else {\n            showElement(loadMoreBtn);\n        }\n    } catch (err) {\n        console.error(err);\n        loader.classList.remove(\"is-open\");\n        showError(\"An error occurred while fetching images. Please try again.\");\n    } finally {\n        hideElement(loader);\n        searchForm.reset();\n    }\n};\n\nconst onLoadMoreClick = async () => {\n    page += 1;\n\n    try {\n        loader.classList.add(\"is-open\");\n        const data = await fetchPhotos(query, page, perPage);\n        renderGallery(data.hits);\n        loader.classList.remove(\"is-open\");\n\n        const { height: cardHeight } = cardsList.firstElementChild.getBoundingClientRect();\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: \"smooth\",\n        });\n\n        if (data.hits.length < perPage) {\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: \"topCenter\",\n                title: \"Info\",\n                timeout: 4000,\n            });\n            loadMoreBtn.classList.add('is-hidden');\n        }\n    } catch (err) {\n        console.error(err);\n        showError(\"An error occurred while loading more images. Please try again.\");\n    } finally {\n        hideElement(loader);\n    }\n};\n\nconst renderGallery = (photos) => {\n    const markup = photos.map(createGalleryCard).join(\"\");\n    cardsList.insertAdjacentHTML('beforeend', markup);\n    gallery.refresh();\n};\n\nsearchForm.addEventListener(\"submit\", onSearchFormSubmit);\nloadMoreBtn.addEventListener(\"click\", onLoadMoreClick);\n"],"names":["axios","fetchPhotos","searchedQuery","page","perPage","asyncParams","response","createGalleryCard","imgData","searchForm","cardsList","loader","loadMoreBtn","query","gallery","SimpleLightbox","showElement","element","hideElement","showError","message","title","iziToast","clearPage","onSearchFormSubmit","event","data","renderGallery","err","onLoadMoreClick","cardHeight","photos","markup"],"mappings":"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"}